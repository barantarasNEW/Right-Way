"use strict";(self.webpackChunkwebpack_template=self.webpackChunkwebpack_template||[]).push([[306,743],{4306:function(e,a,s){s.r(a),s.d(a,{default:function(){return I}});var t=s(7294),n=s(9250),r=s(9005),l=s(4873),i=s(8696),c=s(1741),o=s(1088),u=s(9655);function d(e,a){const s=new URLSearchParams(e.toString());return Object.entries(a).forEach((e=>{let[a,t]=e;null===t?s.delete(a):s.set(a,t)})),s.toString()}const m=["/","/top","/random"];var h=s(5893),p=e=>{let{onChange:a,isSearch:s}=e;const t=(0,n.TH)().pathname,r=m.includes(t);return(0,h.jsx)("nav",{className:"additional-bar",children:(0,h.jsxs)("ul",{className:"additional-bar__list",children:[(0,h.jsx)("li",{className:"additional-bar__item",style:r?{}:{visibility:"hidden"},children:(0,h.jsx)("button",{className:"additional-bar__link",onClick:a,children:(0,h.jsx)("img",{className:"additional-bar__icon",src:"./img/svg/"+(s?"cancel.svg":"search.svg"),alt:"icon"})})}),(0,h.jsx)("li",{className:"additional-bar__item",children:(0,h.jsx)(u.rU,{to:"/user",className:"additional-bar__link",children:(0,h.jsx)("img",{className:"additional-bar__icon",src:"./img/svg/user.svg",alt:"icon"})})})]})})},g=()=>(0,h.jsx)(u.rU,{to:"/",children:(0,h.jsx)("img",{src:"./img/svg/logo.svg",alt:"logo"})}),j=s(4184),x=s.n(j);const N=[{href:"/",name:"Home"},{href:"/top",name:"Top"},{href:"/random",name:"Random"},{href:"/quiz",name:"Quiz"}],v=e=>{let{isActive:a}=e;return x()("navbar__link",{active:a})};var f=()=>(0,h.jsx)("nav",{className:"navbar",children:(0,h.jsx)("ul",{className:"navbar__list",children:N.map((e=>{let{href:a,name:s}=e;return(0,h.jsx)("li",{className:"navbar__item",children:(0,h.jsx)(u.OL,{to:a,className:v,children:s})},a)}))})}),S=()=>{const{names:e}=(0,l.C)((e=>e.names)),[a,s]=(0,u.lr)(),r=a.get("query")||"",i=(0,t.useDeferredValue)(r),c=(0,t.useRef)(null),o=(0,n.TH)().pathname,m="/"===o?"/home":o,p=(0,t.useMemo)((()=>{const a=new RegExp(`${i}.+$`,"i");return e.filter((e=>-1!==e.search(a)))}),[i,e]);return(0,t.useEffect)((()=>{c.current?.focus()}),[]),(0,h.jsxs)("div",{className:"search",children:[(0,h.jsx)("input",{ref:c,type:"text",className:"search__input",value:i,onChange:e=>{s(d(a,{query:e.target.value||null}))}}),(0,h.jsx)("button",{className:"search__btn",onClick:()=>{s(d(a,{query:null})),c.current?.focus()},children:(0,h.jsx)("img",{className:"search__icon",src:"./img/svg/cancel.svg",alt:"icon"})}),(0,h.jsx)("ul",{className:"search__list",children:p.map((e=>(0,h.jsx)("li",{className:"search__item",children:(0,h.jsx)(u.rU,{to:`${m}/${e}`,className:"search__link",children:e})},e)))})]})},_=()=>{const e=(0,n.s0)();return(0,h.jsxs)("button",{className:"bread-crumbs__btn",onClick:()=>e(-1),children:[(0,h.jsx)("img",{className:"bread-crumbs__icon",src:"./img/svg/back.svg",alt:"icon"}),"Back"]})},b=e=>{let{isSearch:a,setSearch:s,setToggleSearch:r}=e;const[l,i]=(0,u.lr)(),{id:c}=(0,n.UO)(),o=(0,n.TH)().pathname;return(0,t.useEffect)((()=>{a&&s(!1)}),[o]),(0,h.jsx)("header",{className:"header",onClick:e=>e.stopPropagation(),children:(0,h.jsx)("div",{className:"container",children:(0,h.jsxs)("div",{className:"header__wrapper",children:[(0,h.jsxs)("div",{className:"header__top",children:[(0,h.jsx)(g,{}),(0,h.jsx)(f,{}),(0,h.jsx)(p,{isSearch:a,onChange:()=>{i(d(l,{query:null})),r()}})]}),(0,h.jsxs)("div",{className:"header__bottom",children:[a&&(0,h.jsx)(S,{}),c&&(0,h.jsx)(_,{})]})]})})})},A=()=>(0,h.jsx)("footer",{className:"footer",children:(0,h.jsx)("div",{className:"container",children:(0,h.jsx)("div",{className:"footer__wrapper",children:"Copyright @2023 Ravel"})})}),E=s(6743),C=s(1395),I=()=>{const e=(0,r.v0)(),a=(0,l.T)(),s=(0,l.C)((e=>e.user)).user,{loading:u}=(0,l.C)((e=>e.names)),d=(0,n.TH)().pathname,m=(0,n.s0)(),[p,g]=(0,t.useState)(!1),[j,x]=(0,t.useState)(!0);return(0,t.useEffect)((()=>{a(c.S()),(0,r.Aj)(e,(e=>{e?((0,i.c)(e.uid).then((s=>{const t={email:e.email,password:s?.password,firstName:s?.firstName,lastName:s?.lastName};a((0,o.a)(t))})).catch((e=>console.log(e))).finally((()=>x(!1))),"/signUp"!==d&&"/signIn"!==d||m("/")):x(!1)}))}),[]),s.email.length||!1!==j?(0,h.jsx)("div",{className:"wrapper",style:{backgroundImage:"url(./img/main.jpg)"},onClick:()=>g(!1),children:u||j?(0,h.jsx)(C.Z,{}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(b,{isSearch:p,setSearch:g,setToggleSearch:()=>g((e=>!e))}),(0,h.jsx)("main",{className:"main",children:(0,h.jsx)(t.Suspense,{fallback:(0,h.jsx)(C.Z,{}),children:(0,h.jsx)(n.j3,{})})}),(0,h.jsx)(A,{})]})}):(0,h.jsx)(E.default,{})}},1395:function(e,a,s){var t=s(3935),n=s(5893);a.Z=()=>(0,n.jsx)(n.Fragment,{children:(0,t.createPortal)((0,n.jsxs)("div",{className:"lds-roller",children:[(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{})]}),document.getElementById("portal-root"))})},2177:function(e,a,s){s.d(a,{db:function(){return l},l:function(){return r}});var t=s(3977),n=s(294);const r=(0,t.ZF)({apiKey:"AIzaSyDn-uSjoBt9Xb3MsYRb_nY2o0PuEXqSRcc",authDomain:"travel-auth-7b217.firebaseapp.com",projectId:"travel-auth-7b217",storageBucket:"travel-auth-7b217.appspot.com",messagingSenderId:"304864174974",appId:"1:304864174974:web:d2d7b0bbc5a99349bc492f"}),l=(0,n.ad)(r)},8696:function(e,a,s){s.d(a,{c:function(){return r}});var t=s(294),n=s(2177);const r=async e=>{const a=(0,t.JU)(n.db,"users",e);return(0,t.QT)(a).then((e=>e.data())).catch((e=>console.log(e)))}},4873:function(e,a,s){s.d(a,{C:function(){return r},T:function(){return n}});var t=s(5998);const n=t.I0,r=t.v9},6743:function(e,a,s){s.r(a),s.d(a,{default:function(){return _}});var t=s(7294),n=s(9250),r=s(4184),l=s.n(r),i=s(1395),c=s(9655),o=s(9005),u=s(2177),d=s(4873),m=s(294),h=s(1088);let p=function(e){return e[e.FIRSTNAME=0]="FIRSTNAME",e[e.LASTNAME=1]="LASTNAME",e[e.EMAIL=2]="EMAIL",e[e.PASSWORD=3]="PASSWORD",e}({});var g=s(5893),j=e=>{let{setIsLoading:a}=e;const[s,r]=(0,t.useState)(""),[i,j]=(0,t.useState)(""),[x,N]=(0,t.useState)(""),[v,f]=(0,t.useState)(""),[S,_]=(0,t.useState)([]),b=(0,d.T)(),A=(0,o.v0)(u.l),E=(0,n.s0)();return(0,g.jsxs)("form",{className:"sign",autoComplete:"true",onSubmit:e=>e.preventDefault(),children:[(0,g.jsx)("input",{className:l()("input",{"input--error":S.includes(p.FIRSTNAME)}),type:"text",placeholder:"First name",autoComplete:"true",value:s,onChange:e=>r(e.target.value)}),(0,g.jsx)("input",{className:l()("input",{"input--error":S.includes(p.LASTNAME)}),type:"text",placeholder:"Last name",autoComplete:"true",value:i,onChange:e=>j(e.target.value)}),(0,g.jsx)("input",{className:l()("input",{"input--error":S.includes(p.EMAIL)}),type:"email",placeholder:"Email",autoComplete:"true",value:x,onChange:e=>N(e.target.value)}),(0,g.jsx)("input",{className:l()("input",{"input--error":S.includes(p.PASSWORD)}),type:"password",placeholder:"Password",autoComplete:"true",value:v,onChange:e=>f(e.target.value)}),(0,g.jsx)("button",{className:"btn",onClick:()=>{const e=(()=>{let e=[];return s.length<3?(_((e=>[...e,p.FIRSTNAME])),e.push(p.FIRSTNAME)):(_((e=>e.filter((e=>e!==p.FIRSTNAME)))),e.filter((e=>e!==p.FIRSTNAME))),i.length<3?(_((e=>[...e,p.LASTNAME])),e.push(p.LASTNAME)):(_((e=>e.filter((e=>e!==p.LASTNAME)))),e.filter((e=>e!==p.LASTNAME))),x.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/)?(_((e=>e.filter((e=>e!==p.EMAIL)))),e.filter((e=>e!==p.EMAIL))):(_((e=>[...e,p.EMAIL])),e.push(p.EMAIL)),v.length<6?(_((e=>[...e,p.PASSWORD])),e.push(p.PASSWORD)):(_((e=>e.filter((e=>e!==p.PASSWORD)))),e.filter((e=>e!==p.PASSWORD))),e})();e.length||(a(!0),(0,o.Xb)(A,x,v).then((e=>{b((0,h.a)({email:x,password:v,firstName:s,lastName:i})),(async(e,a)=>{try{await(0,m.pl)((0,m.JU)(u.db,"users",e),a)}catch(e){console.error("Error adding document: ",e)}})(e.user.uid,{firstName:s,lastName:i,password:v}),E("/")})).catch((e=>console.log(e))).finally((()=>a(!1))))},type:"submit",children:"Sign up"}),(0,g.jsx)(c.rU,{className:"sign__link",to:"/signIn",children:"Sign in"})]})},x=s(8696),N=s(3935),v=e=>{let{title:a}=e;const[s,n]=(0,t.useState)(!0);return(0,t.useEffect)((()=>{const e=setTimeout((()=>{n(!1)}),2e3);return()=>clearTimeout(e)}),[n]),s?(0,g.jsx)(g.Fragment,{children:(0,N.createPortal)((0,g.jsx)("div",{className:"modal",onClick:()=>n(!1),children:(0,g.jsx)("div",{className:"modal__wrapper",onClick:e=>e.stopPropagation(),children:a})}),document.getElementById("portal-root"))}):null},f=e=>{let{setIsLoading:a}=e;const[s,r]=(0,t.useState)(""),[l,i]=(0,t.useState)(""),[m,p]=(0,t.useState)(!1),j=(0,o.v0)(u.l),N=(0,d.T)(),f=(0,n.s0)();return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("form",{className:"sign",onSubmit:e=>e.preventDefault(),children:[(0,g.jsx)("input",{className:"input",type:"email",placeholder:"Email",autoComplete:"true",value:s,onChange:e=>r(e.target.value)}),(0,g.jsx)("input",{className:"input",type:"password",placeholder:"Password",autoComplete:"true",value:l,onChange:e=>i(e.target.value)}),(0,g.jsx)("button",{className:"btn",onClick:()=>{a(!0),(0,o.e5)(j,s,l).then((e=>{(0,x.c)(e.user.uid).then((e=>{const a={email:s,password:l,firstName:e?.firstName,lastName:e?.lastName};N((0,h.a)(a)),f("/")}))})).catch((()=>{p(!0)})).finally((()=>a(!1)))},type:"submit",children:"Sign In"}),(0,g.jsx)(c.rU,{className:"sign__link",to:"/signUp",children:"Sign Up"})]}),m&&(0,g.jsx)(v,{title:"Not found user"})]})};const S=e=>l()("auth",{"auth--dis":e});var _=()=>{const[e,a]=(0,t.useState)(!1),s="/signUp"===(0,n.TH)().pathname;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("section",{className:S(e),style:{backgroundImage:"url(./img/main2.jpg)"},children:(0,g.jsx)("div",{className:"container",children:(0,g.jsxs)("div",{className:"auth__wrapper",children:[(0,g.jsxs)("h1",{className:"title auth__title",children:["Gateway to the",(0,g.jsx)("br",{}),"World"]}),s?(0,g.jsx)(j,{setIsLoading:a}):(0,g.jsx)(f,{setIsLoading:a})]})})}),e&&(0,g.jsx)(i.Z,{})]})}}}]);